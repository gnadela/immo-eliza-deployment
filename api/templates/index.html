<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImmoEliza</title>
</head>
<body>
    <h1>Property Prediction Input Form</h1>
    <form id="predictionForm" method="post" onsubmit="submitForm(event)">

        <label for="total_area_sqm">Total Area (sqm):</label>
        <input type="number" id="total_area_sqm" name="total_area_sqm" value="{{ data.total_area_sqm }}" required><br><br>

        <label for="property_type">Property Type:</label>
        <input type="text" id="property_type" name="property_type" value="{{ data.property_type }}" required><br><br>

        <label for="subproperty_type">Subproperty Type:</label>
        <input type="text" id="subproperty_type" name="subproperty_type" value="{{ data.subproperty_type }}" required><br><br>

        <label for="province">Province:</label>
        <input type="text" id="province" name="province" value="{{ data.province }}" required><br><br>

        <label for="locality">Locality:</label>
        <input type="text" id="locality" name="locality" value="{{ data.locality }}" required><br><br>
 
        <label for="zip_code">Zip Code:</label>
        <input type="text" id="zip_code" name="zip_code" value="{{ data.zip_code }}" required><br><br>

        <label for="construction_year">Construction Year:</label>
        <input type="number" id="construction_year" name="construction_year" value="{{ data.construction_year }}" required><br><br>

        <label for="surface_land_sqm">Surface Land (sqm):</label>
        <input type="number" id="surface_land_sqm" name="surface_land_sqm" value="{{ data.surface_land_sqm }}" required><br><br>

        <label for="nbr_frontages">Number of Frontages:</label>
        <input type="number" id="nbr_frontages" name="nbr_frontages" value="{{ data.nbr_frontages }}" required><br><br>

        <label for="nbr_bedrooms">Number of Bedrooms:</label>
        <input type="number" id="nbr_bedrooms" name="nbr_bedrooms" value="{{ data.nbr_bedrooms }}" required><br><br>

        <label for="equipped_kitchen">Equipped Kitchen:</label>
        <input type="text" id="equipped_kitchen" name="equipped_kitchen" value="{{ data.equipped_kitchen }}" required><br><br>

        <label for="fl_furnished">Furnished:</label>
        <input type="number" id="fl_furnished" name="fl_furnished" value="{{ data.fl_furnished }}" required><br><br>

        <label for="fl_open_fire">Open Fire:</label>
        <input type="number" id="fl_open_fire" name="fl_open_fire" value="{{ data.fl_open_fire }}" required><br><br>

        <label for="fl_terrace">Terrace:</label>
        <input type="number" id="fl_terrace" name="fl_terrace" value="{{ data.fl_terrace }}" required><br><br>

        <label for="terrace_sqm">Terrace Area (sqm):</label>
        <input type="number" id="terrace_sqm" name="terrace_sqm" value="{{ data.terrace_sqm }}" required><br><br>

        <label for="fl_garden">Garden:</label>
        <input type="number" id="fl_garden" name="fl_garden" value="{{ data.fl_garden }}" required><br><br>

        <label for="garden_sqm">Garden Area (sqm):</label>
        <input type="number" id="garden_sqm" name="garden_sqm" value="{{ data.garden_sqm }}" required><br><br>

        <label for="fl_swimming_pool">Swimming Pool:</label>
        <input type="number" id="fl_swimming_pool" name="fl_swimming_pool" value="{{ data.fl_swimming_pool }}" required><br><br>

        <label for="fl_floodzone">Flood Zone:</label>
        <input type="number" id="fl_floodzone" name="fl_floodzone" value="{{ data.fl_floodzone }}" required><br><br>

        <label for="state_building">Building State:</label>
        <input type="text" id="state_building" name="state_building" value="{{ data.state_building }}" required><br><br>

        <label for="primary_energy_consumption_sqm">Primary Energy Consumption (sqm):</label>
        <input type="number" id="primary_energy_consumption_sqm" name="primary_energy_consumption_sqm" value="{{ data.primary_energy_consumption_sqm }}" required><br><br>

        <label for="epc">EPC:</label>
        <input type="text" id="epc" name="epc" value="{{ data.epc }}" required><br><br>

        <label for="heating_type">Heating Type:</label>
        <input type="text" id="heating_type" name="heating_type" value="{{ data.heating_type }}" required><br><br>

        <label for="fl_double_glazing">Double Glazing:</label>
        <input type="number" id="fl_double_glazing" name="fl_double_glazing" value="{{ data.fl_double_glazing }}" required><br><br>

        <button type="submit">Predict</button>
    </form>  
    <script>
        async function submitForm(event) {
            event.preventDefault();
            const formData = new FormData(document.getElementById('predictionForm'));
            const formDataJson = Object.fromEntries(formData.entries());
            
            const response = await fetch('/predict/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formDataJson)
            });

            const prediction = await response.text();
            document.body.innerHTML = prediction;
        }
    </script>
</body>
</html>
